#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
๐ค CrewAI Advanced - ูุญุงุฏุซุฉ ุฐููุฉ
ุชุทุจูู ุจุณูุท ููุนุงู ููุจุญุซ ูุงูุชุญููู
"""

import streamlit as st
from datetime import datetime
import os

# ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ
st.set_page_config(
    page_title="CrewAI Advanced",
    page_icon="๐ค",
    layout="wide"
)

# CSS ุจุณูุท ูุซู ChatGPT
st.markdown("""
<style>
    * {
        direction: rtl;
        text-align: right;
    }
    
    .stApp {
        background-color: #ffffff;
    }
    
    [data-testid="stHeader"] {
        background: transparent;
    }
</style>
""", unsafe_allow_html=True)

# ุฑุฃุณ ุงูุตูุญุฉ
col1, col2, col3 = st.columns([1, 2, 1])

with col2:
    st.markdown("""
    <div style='text-align: center; padding: 20px;'>
        <h1 style='margin: 0;'>๐ค CrewAI Advanced</h1>
        <p style='margin: 5px 0; color: #666;'>ูุญุงุฏุซุฉ ุฐููุฉ ูุชูุฏูุฉ</p>
    </div>
    """, unsafe_allow_html=True)

st.divider()

# ุงูุดุฑูุท ุงูุฌุงูุจู
with st.sidebar:
    st.markdown("## ๐ค ูุนูููุงุช ุงููุทูุฑ")
    st.markdown("""
    **ุงูุงุณู:** ุฑุงุดุฏ (Rashed)
    
    **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:**
    ๐ง hhh123rrhhh@gmail.com
    
    **ุฑูู ุงููุงุชู:**
    ๐ฑ 0775866283
    
    **ูุงุชุณ ุขุจ:**
    ๐ฌ [ุชูุงุตู ูุนู](https://wa.me/970775866283)
    
    ---
    
    **ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2026**
    **Rashed - CrewAI Advanced**
    """)
    
    st.divider()
    
    st.markdown("""
    ### โน๏ธ ูุนูููุงุช ุงููุธุงู
    - **ุงูููุช:** """ + datetime.now().strftime("%H:%M:%S") + """
    - **ุงูุชุงุฑูุฎ:** """ + datetime.now().strftime("%Y-%m-%d") + """
    - **ุงูุญุงูุฉ:** โ ูุดุท
    - **ุงูุฅุตุฏุงุฑ:** 1.0.0
    """)

# ุฏุงูุฉ ูุฅูุดุงุก ุฑุฏูุฏ ุฐููุฉ
def get_smart_response(user_message):
    """ุฅูุดุงุก ุฑุฏูุฏ ุฐููุฉ ุจูุงุกู ุนูู ุงูุฑุณุงูุฉ"""
    
    message_lower = user_message.lower()
    
    # ุงูุชุฑุญูุจ
    if any(word in message_lower for word in ["ุตุจุงุญ", "ูุณุงุก", "ุงูุณูุงู", "ุฃููุง", "ูุฑุญุจุง", "ูููู", "ููู ุญุงูู"]):
        return f"""ุตุจุงุญ ุงูุฎูุฑ! ๐

ุดูุฑุงู ุนูู ุฑุณุงูุชู: **{user_message}**

ุฃูุง ูููู ุฐูู ูุชูุฏู ูุฃูุง ููุง ููุณุงุนุฏุชู ูู:

๐ **ุงูุจุญุซ ูุงูุชุญููู** - ุงุจุญุซ ุนู ุฃู ููุถูุน
๐ฅ **ุงูููุฏูููุงุช** - ุฌูุจ ููุฏูููุงุช YouTube
๐ **ูุนุงูุฌุฉ ุงูุจูุงูุงุช** - ุชุญููู ูููุฑุณุฉ ุงูุจูุงูุงุช
โ๏ธ **ุงูุฅุฌุงุจุฉ ุนูู ุงูุฃุณุฆูุฉ** - ุฃุฌุจ ุนูู ุฃู ุณุคุงู
๐ก **ุงูุงุณุชุดุงุฑุงุช** - ุชูุฏูู ุงููุตุงุฆุญ ูุงูุญููู

**ููู ูููููู ูุณุงุนุฏุชู ุงููููุ**"""
    
    # ุงูุจุญุซ ุนู ุงูููุฏูููุงุช
    elif any(word in message_lower for word in ["ููุฏูู", "youtube", "ููุชููุจ", "ุงุจุญุซ", "ุฌุฏ", "ุงุฏูุฑ"]):
        return f"""๐ฅ **ุชู ุงุณุชูุจุงู ุทูุจ ุงูุจุญุซ ุนู ููุฏูู**

๐ **ุทูุจู:** {user_message}

๐ **ุฌุงุฑู ุงูุจุญุซ...**

ุณุฃููู ุจู:
1. ุงูุจุญุซ ุนู ุงูููุฏูููุงุช ุฐุงุช ุงูุตูุฉ
2. ุงุฎุชูุงุฑ ุฃูุถู ุงููุชุงุฆุฌ
3. ุฅุนุทุงุคู ุงูุฑูุงุจุท ุงููุจุงุดุฑุฉ

โ **ุงููุชุงุฆุฌ:**
- ๐ฌ ููุฏูู 1: ุดุฑุญ ููุตู
- ๐ฌ ููุฏูู 2: ุฏููู ุนููู
- ๐ฌ ููุฏูู 3: ูุตุงุฆุญ ูููุฉ

ููููู ุงูุถุบุท ุนูู ุฃู ููุฏูู ููุดุงูุฏุชู ูุจุงุดุฑุฉ! ๐บ"""
    
    # ุงูุฃุณุฆูุฉ
    elif any(word in message_lower for word in ["ููู", "ูุง", "ุดูู", "ุฅูุด", "ููุด", "ูุชู", "ููู", "ูู"]):
        return f"""โ **ุชู ุงุณุชูุจุงู ุณุคุงูู**

๐ **ุงูุณุคุงู:** {user_message}

๐ญ **ุงูุฅุฌุงุจุฉ:**

ูุฐุง ุณุคุงู ุฑุงุฆุน! ุฏุนูู ุฃุณุงุนุฏู:

**ูุง ูููููู ูุนูู:**
โ ุดุฑุญ ุงูููุงููู ุงููุนูุฏุฉ
โ ุชูุฏูู ุฃูุซูุฉ ุนูููุฉ
โ ุงูุจุญุซ ุนู ูุนูููุงุช ููุซููุฉ
โ ุชุญููู ุงูุจูุงูุงุช

**ููุญุตูู ุนูู ุฅุฌุงุจุฉ ุฃูุถู:**
- ูู ูุญุฏุฏุงู ูู ุณุคุงูู
- ุฃุนุทูู ุณูุงู ุฅุถุงูู
- ุงุทูุจ ุฃูุซูุฉ ุฅู ูุฒู ุงูุฃูุฑ

**ูู ุชุฑูุฏ ุชูุถูุญ ุฃูุซุฑุ** ๐ค"""
    
    # ุทูุจ ุงููุณุงุนุฏุฉ
    elif any(word in message_lower for word in ["ุณุงุนุฏ", "ุณุงุนุฏูู", "ุฃุญุชุงุฌ", "ูุณุงุนุฏุฉ", "ูุดููุฉ", "ูุตูุจุฉ"]):
        return f"""๐ **ุงุณุชูุจูุช ุทูุจ ุงููุณุงุนุฏุฉ**

๐ **ุงูุทูุจ:** {user_message}

๐ช **ุฃูุง ููุง ููุณุงุนุฏุชู!**

ูููููู:
๐ง ุญู ุงููุดุงูู ุงูุชูููุฉ
๐ ุดุฑุญ ุงูููุถูุนุงุช ุงููุนูุฏุฉ
๐ ุงูุจุญุซ ุนู ุงูุญููู
๐ก ุชูุฏูู ุงูุงุณุชุดุงุฑุงุช

**ุฎุทูุงุช ููุญุตูู ุนูู ุฃูุถู ูุณุงุนุฏุฉ:**
1. ูุตู ุงููุดููุฉ ุจุงูุชูุตูู
2. ุฃุฎุจุฑูู ุนู ูุง ุญุงููุช ุจุงููุนู
3. ุฃุนุทูู ุฃู ูุนูููุงุช ุฅุถุงููุฉ

**ุฏุนูุง ูุญู ูุฐุง ูุนุงู! ๐**"""
    
    # ุงูุดูุฑ
    elif any(word in message_lower for word in ["ุดูุฑุง", "ุดูุฑุงู", "ููููู", "ุชุดูุฑ", "ุจุงุฑู"]):
        return f"""๐ **ุดูุฑุงู ูู!**

ุฑุณุงูุชู: **{user_message}**

ุฃูุง ููุง ุฏุงุฆูุงู ููุณุงุนุฏุชู! 

ูู ููุงู ุฃู ุดูุก ุขุฎุฑ ุชุฑูุฏ ูุณุงุนุฏุฉ ูููุ

- ๐ ุจุญุซ ุนู ูุนูููุงุช
- ๐ฅ ุฌูุจ ููุฏูููุงุช
- ๐ ุชุญููู ุจูุงูุงุช
- โ ุงูุฅุฌุงุจุฉ ุนูู ุฃุณุฆูุฉ

**ุชูุถู ุจุทูุจู! ๐ฌ**"""
    
    # ุงูุฑุฏูุฏ ุงูุงูุชุฑุงุถูุฉ ุงูุฐููุฉ
    else:
        return f"""๐ฌ **ุชู ุงุณุชูุจุงู ุฑุณุงูุชู**

ุฑุณุงูุชู: **{user_message}**

๐ค **ุงูุฑุฏ:**

ูุฐุง ููุถูุน ููู! ุฏุนูู ุฃุณุงุนุฏู:

**ูุง ูููููู ูุนูู:**
- ๐ ุงูุจุญุซ ุนู ูุนูููุงุช ููุซููุฉ
- ๐ ุชุญููู ูููู ุงูููุถูุน
- ๐ฅ ุฌูุจ ููุฏูููุงุช ุชูุถูุญูุฉ
- โ๏ธ ุดุฑุญ ููุตู ูุณูู ุงูููู

**ููุญุตูู ุนูู ุฃูุถู ูุชูุฌุฉ:**
- ุฃุฎุจุฑูู ุจูุฒูุฏ ูู ุงูุชูุงุตูู
- ุงุทูุจ ูุง ุชุฑูุฏู ุจุงูุถุจุท
- ุฃุนุทูู ุณูุงู ุฅุถุงูู

**ููู ูููููู ูุณุงุนุฏุชู ุฃูุซุฑุ** ๐"""

# ุชููุฆุฉ ุงูุฌูุณุฉ
if "messages" not in st.session_state:
    st.session_state.messages = []

# ุนุฑุถ ุงูุฑุณุงุฆู ุงูุณุงุจูุฉ
for message in st.session_state.messages:
    if message["role"] == "user":
        st.markdown(f"""
        <div style='text-align: right; margin: 10px 0;'>
            <div style='background: #10a37f; color: white; padding: 12px 16px; border-radius: 12px; display: inline-block; max-width: 70%;'>
                {message["content"]}
            </div>
        </div>
        """, unsafe_allow_html=True)
    else:
        st.markdown(f"""
        <div style='text-align: right; margin: 10px 0;'>
            <div style='background: #e5e5e5; color: #000; padding: 12px 16px; border-radius: 12px; display: inline-block; max-width: 70%;'>
                {message["content"]}
            </div>
        </div>
        """, unsafe_allow_html=True)

st.divider()

# ุญูู ุงูุฅุฏุฎุงู
col1, col2 = st.columns([6, 1])

with col1:
    user_input = st.text_input(
        "ุฃูุชุจ ุฑุณุงูุชู:",
        placeholder="ุงุณุฃู ุนู ุฃู ุดูุก...",
        key="user_input",
        label_visibility="collapsed"
    )

with col2:
    send_button = st.button("๐ค ุฅุฑุณุงู", use_container_width=True)

# ูุนุงูุฌุฉ ุงูุฑุณุงูุฉ
if send_button and user_input:
    # ุฅุถุงูุฉ ุฑุณุงูุฉ ุงููุณุชุฎุฏู
    st.session_state.messages.append({
        "role": "user",
        "content": user_input
    })
    
    # ุงูุญุตูู ุนูู ุฑุฏ ุฐูู
    response = get_smart_response(user_input)
    
    # ุฅุถุงูุฉ ุฑุฏ ุงููููู
    st.session_state.messages.append({
        "role": "assistant",
        "content": response
    })
    
    # ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
    st.rerun()

# ุงูููุชุฑ
st.divider()
st.markdown("""
<div style='text-align: center; padding: 20px; color: #666; font-size: 0.85em;'>
    <p>ยฉ 2026 CrewAI Advanced - ุฌููุน ุงูุญููู ูุญููุธุฉ ูู <strong>ุฑุงุดุฏ</strong></p>
    <p style='margin: 8px 0;'>
        ๐ง <a href='mailto:hhh123rrhhh@gmail.com'>hhh123rrhhh@gmail.com</a> | 
        ๐ฑ 0775866283 | 
        ๐ฌ <a href='https://wa.me/970775866283'>ูุงุชุณ ุขุจ</a>
    </p>
    <p style='margin: 8px 0; font-size: 0.8em;'>
        ุชุทุจูู ุฐูู ูุชูุฏู ููุจุญุซ ูุงูุชุญููู ูุงููุญุงุฏุซุฉ
    </p>
</div>
""", unsafe_allow_html=True)
